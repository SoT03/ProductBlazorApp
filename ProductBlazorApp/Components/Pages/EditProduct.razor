@page "/edit/{id:int?}"
@inject NavigationManager NavigationManager
@inject ProductService ProductService
@using Microsoft.AspNetCore.Components.Forms
@using ProductBlazorApp.Data
@using ProductBlazorApp.Models
@using ProductBlazorApp.Services
@rendermode InteractiveServer

<h3>@(isNew ? "Add New Product" : "Edit Product")</h3>

@if (loading)
{
    <p>Loading...</p>
}else
{
    <EditForm Model="newProduct" OnValidSubmit="SaveProduct" FormName="AddProductForm">
        <DataAnnotationsValidator />

        <div class="mb-3">
            <label class="form-label">Name</label>
            <InputText class="form-control" @bind-Value="newProduct.Name" />
            <ValidationMessage For="@(() => newProduct.Name)" class="text-danger" />
        </div>

        <div class="mb-3">
            <label class="form-label">Price</label>
            <InputNumber class="form-control" @bind-Value="newProduct.Price" />
            <ValidationMessage For="@(() => newProduct.Price)" class="text-danger" />
        </div>

        <div class="mb-3">
            <label class="form-label">Description</label>
            <InputTextArea class="form-control" @bind-Value="newProduct.Description" />
            <ValidationMessage For="@(() => newProduct.Description)" class="text-danger" />
        </div>

        <button class="btn btn-success">@(isNew ? "Add" : "Update")</button>

        <a href="/" type="button" class="btn btn-secondary">Cancel</a>
    </EditForm>
}



